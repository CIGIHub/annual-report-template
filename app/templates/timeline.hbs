<div class="background-row timeline-background"></div>
<div class="timeline-container show-for-large">
  <div class="grid-container">
    <div class="grid-x grid-margin-x">
      <div class="cell medium-8">
        <h1>{{t "timeline.title"}}</h1>
      </div>
      <div class="cell medium-4">
        <div class="grid-x">
          <div class="cell clearfix">
            <div class="timeline-bubble-preview opinion float-right"></div>
            <span class="timeline-bubble-label float-right">{{t "opinions"}}</span>
          </div>
        </div>
        <div class="grid-x">
          <div class="cell clearfix">
            <div class="timeline-bubble-preview publication float-right"></div>
            <span class="timeline-bubble-label float-right">{{t "publications"}}</span>
          </div>
        </div>
        <div class="grid-x">
          <div class="cell clearfix">
            <div class="timeline-bubble-preview event float-right"></div>
            <span class="timeline-bubble-label float-right">{{t "events"}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="timeline-search-container show-for-large">
  <div class="grid-container">
    <div class="grid-x grid-margin-x">
      <div class="cell medium-4 timeline-search">
        {{fa-icon "search" prefix="fal" size="sm"}}
        {{input placeholder="search" value=this.search}}
      </div>
      {{#if this.search}}
        <div class="cell medium-2">
          <button type="button" class="clear-button" {{action "clearSearch"}}>
            {{fa-icon "times" prefix="fal" size="sm"}}
            {{t "clear"}}
          </button>
        </div>
      {{/if}}
    </div>
  </div>
</div>
<div class="timeline-container hide-for-large mobile">
  <div class="grid-container">
    <div class="grid-x grid-margin-x">
      <div class="cell medium-8">
        <h1>{{t "timeline.title"}}</h1>
        <p>{{t "timeline.cannotBeDisplayed"}}</p>
      </div>
    </div>
  </div>
</div>
<div class="show-for-large">
  {{cigi-timeline nodes=this.nodes nodeId=this.id search=this.search}}
  <div class="timeline-search-container">
    <div class="grid-container">
      <div class="grid-x grid-margin-x">
        <div class="cell">
        </div>
      </div>
    </div>
  </div>
  {{#if this.node}}
    <div class="timeline-overlay background-image" style={{this.overlayStyle}}>
      <div class="timeline-overlay-container">
        <div class="grid-container">

          <div class="grid-x grid-margin-x">
            <div class="cell medium-10">
              <h2>{{this.node.title}}</h2>
            </div>
          </div>
          <div class="grid-x grid-margin-x">
            <div class="cell medium-10">
              <div class="cigi-red-line"></div>
            </div>
          </div>
          <div class="grid-x grid-margin-x">
            <div class="cell medium-10">
              <h6 class="pub-date">
                {{#unless this.isEvent}}
                  {{this.node.author_str}}
                  <br>
                {{/unless}}
                {{this.node.date_str}}
              </h6>
              <p class="node-summary">{{{this.node.summary}}}</p>
            </div>
          </div>
          <div class="grid-x grid-margin-x">
            <div class="cell medium-10">
              <a class="clearfix read-link" href={{this.node.url_landing_page}} target="_blank" rel="noopener noreferrer">
                <div class="float-left read-link-icon">
                  {{fa-icon "file-alt" prefix="fal" size="lg"}}
                </div>
                <p>
                  <span class="underline">
                    {{#if this.isArticle}}
                      {{t "outputsAndActivities.opinionLink"}}
                    {{/if}}
                    {{#if this.isEvent}}
                      {{t "outputsAndActivities.eventLink"}}
                    {{/if}}
                    {{#if this.isPublication}}
                      {{t "outputsAndActivities.publicationLink"}}
                    {{/if}}
                  </span>
                </p>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="timeline-nav">
        <div class="grid-container">
          <div class="grid-x grid-margin-x">
            <div class="cell medium-8">
              <button type="button" class="previous scroll-arrow scroll-arrow-left" {{action "previousNode"}}></button>
              <button type="button" class="next scroll-arrow scroll-arrow-right" {{action "nextNode"}}></button>
            </div>
          </div>
        </div>
      </div>
      <div class="timeline-back">
        <div class="grid-container">
          <div class="grid-x grid-margin-x">
            <div class="cell medium-8">
              <button type="button" class="clearfix back-link" {{action "closeNode"}}>
                <div class="float-left back-link-icon {{this.node.type}}">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.22in" height="0.19in" viewBox="0 0 16 14">
                    <defs>
                      <clipPath id="a" transform="translate(-256.98 -317)" style="fill: none;">
                        <rect class="a" x="257" y="317" width="16" height="14"/>
                      </clipPath>
                    </defs>
                    <g class="b" style="clip-path:url(#a);">
                      <path d="M262.73,317.19a.69.69,0,0,1,.55-.19.81.81,0,0,1,.5.23.7.7,0,0,1,.2.52v2.5a14.77,14.77,0,0,1,6.38,1.16,4.83,4.83,0,0,1,2.63,4.66,5.53,5.53,0,0,1-.78,2.75,6.23,6.23,0,0,1-1.81,2.06.56.56,0,0,1-.45.11.6.6,0,0,1-.37-.23.43.43,0,0,1,0-.44,6,6,0,0,0,.28-3.48,2.82,2.82,0,0,0-1.91-1.8,12.18,12.18,0,0,0-3.91-.53v2.75a.7.7,0,0,1-.2.52.8.8,0,0,1-.5.23.7.7,0,0,1-.55-.19l-5.5-4.75a.76.76,0,0,1,0-1.12Z" transform="translate(-256.98 -317)"/>
                    </g>
                  </svg>
                </div>
                <p>
                  <span class="underline">{{t "timeline.back"}}</span>
                </p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</div>
